# Sales Leaderboard API

## Description
Sales Leaderboard API is a Node.js backend service that records sales transactions and generates a ranked leaderboard of sales agents. Each sales entry is stored as an individual transaction, and leaderboard data is generated by aggregating sales records per agent.

This project is designed with correctness, scalability, and real-world backend practices in mind.

---

## Tech Stack
- Node.js
- Express.js
- MongoDB
- Swagger (OpenAPI 3.0)
- Deployed on Render

---


## API Documentation (Swagger)

Interactive API documentation is available using **Swagger UI**.

ðŸ”— **Swagger UI (Live):**  
https://sales-leaderboard-api.onrender.com/api-docs

Swagger provides:
- Interactive endpoint testing
- Request/response schemas
- Live API exploration

---

## API Endpoints

### POST `/sales`
Records a single sales transaction.

Each POST request represents **one completed sale (one deal)**.

#### Request Body
```json
{
  "agent": "Roshan Karki",
  "amount": 150000
}
```

#### Field Description
- `agent` (string): Name of the sales agent
- `amount` (number): Sale amount for a single transaction

#### Example Response
```json
{
  "message": "Sale recorded successfully"
}
```

---

### GET `/leaderboard`
Returns a ranked leaderboard of all sales agents based on aggregated sales data.

#### Example Response
```json
[
  {
    "rank": 1,
    "name": "Roshan Karki",
    "totalSales": 300000,
    "totalDeals": 2
  }
]
```

#### Response Description
- `rank`: Leaderboard position
- `name`: Sales agent name
- `totalSales`: Sum of all sales amounts for the agent
- `totalDeals`: Total number of sales transactions recorded for the agent

---

## Ranking Logic
- Agents are ranked in **descending order of total sales amount**
- Leaderboard data is generated dynamically using aggregation
- In case of equal total sales, ranking is handled consistently

---

## Assumptions
- Each sales record represents **one deal**
- Total number of deals per agent is calculated by counting sales records
- Leaderboard updates automatically as new sales are added

---

## Live Deployment
https://sales-leaderboard-api.onrender.com

---

## Running Locally

### Install dependencies
```bash
npm install
```

### Start the server
```bash
npm start
```

## Author
Roshan Karki
